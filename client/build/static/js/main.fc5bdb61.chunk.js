(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,s){},102:function(e,t,s){},126:function(e,t,s){},127:function(e,t,s){},130:function(e,t,s){},131:function(e,t,s){"use strict";s.r(t);var c,n,a=s(1),r=s.n(a),i=s(63),o=s.n(i),l=(s(70),s(7)),j=s.n(l),u=s(12),d=s(2),b=s(11),m=s(3),O=Object(a.createContext)(null),h=s(25),x=s(24),p=s.n(x),f=(s(100),s(0)),v=function(e){var t=e.message,s=t.name,c=t.user_id,n=t.text,a=!1;return c===e.current_uid&&(a=!0),a?Object(f.jsx)("div",{className:"row right-align",children:Object(f.jsx)("div",{className:"col s12 m8 16 right",children:Object(f.jsxs)("p",{className:"sentbyme",children:[" ",s,": ",n]})})}):Object(f.jsx)("div",{className:"row left-align",children:Object(f.jsx)("div",{className:"col s12 m8 16 left",children:Object(f.jsxs)("p",{className:"opponent",children:[" ",s,": ",n]})})})},g=(s(102),s(64)),N=s.n(g),w=function(e){var t=e.messages,s=e.user_id;return Object(f.jsx)(N.a,{className:"messages",children:t.map((function(e,t){return Object(f.jsx)(v,{message:e,current_uid:s},e._id)}))})},S=(s(126),function(e){var t=e.message,s=e.setMessage,c=e.sendMessage;return Object(f.jsx)("div",{children:Object(f.jsxs)("form",{action:"",onSubmit:c,className:"form",children:[Object(f.jsx)("input",{type:"text",className:"input",placeholder:"Type your message here..",value:t,onChange:function(e){return s(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?c(e):null}}),Object(f.jsx)("button",{className:"btn sendButton",children:"Send Message"})]})})}),y=(s(127),function(){var e=Object(a.useContext)(O),t=e.user,s=(e.setUser,Object(m.g)()),n=s.room_id,r=(s.room_name,Object(a.useState)("")),i=Object(d.a)(r,2),o=i[0],l=i[1],j=Object(a.useState)([]),u=Object(d.a)(j,2),b=u[0],x=u[1];Object(a.useEffect)((function(){(c=p()("localhost:5000")).emit("join",{name:t.name,room_id:n,user_id:t._id})}),[]),Object(a.useEffect)((function(){c.on("message",(function(e){x([].concat(Object(h.a)(b),[e]))}))}));return Object(f.jsx)("div",{className:"outerContainer",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(w,{messages:b,user_id:t._id}),Object(f.jsx)(S,{message:o,setMessage:l,sendMessage:function(e){e.preventDefault(),o&&(console.log(o),c.emit("sendMessage",o,n,(function(){return l("")})))}})]})})}),C=function(e){var t=e.name;return Object(f.jsx)("div",{className:"card horizontal",children:Object(f.jsx)("div",{className:"card-stacked",children:Object(f.jsx)("div",{className:"card-content",children:Object(f.jsx)("p",{children:t})})})})},_=function(e){var t=e.rooms;return Object(f.jsx)("div",{children:t&&t.map((function(e){return Object(f.jsx)(b.b,{to:"/chat/"+e._id+"/"+e.name,children:Object(f.jsx)(C,{name:e.name})},e._id)}))})},k=function(){var e=Object(a.useContext)(O),t=e.user,s=(e.setUser,Object(a.useState)("")),c=Object(d.a)(s,2),r=c[0],i=c[1],o=Object(a.useState)([]),l=Object(d.a)(o,2),j=l[0],u=l[1],b="localhost:5000";Object(a.useEffect)((function(){return n=p()(b),function(){n.emit("disconnect"),n.off()}}),[b]),Object(a.useEffect)((function(){n.on("output-rooms",(function(e){u(e)}))}),[]),Object(a.useEffect)((function(){n.on("room-created",(function(e){u([].concat(Object(h.a)(j),[e]))}))}),[j]);return t?Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"col s12 m6",children:Object(f.jsxs)("div",{className:"card blue-grey darken-1",children:[Object(f.jsxs)("div",{className:"card-content white-text",children:[Object(f.jsxs)("span",{className:"card-title",children:["Welcome ",t?t.name:""]}),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n.emit("create-room",r),console.log(r),i("")},children:[Object(f.jsx)("div",{className:"row",children:Object(f.jsxs)("div",{className:"input-field col s12",children:[Object(f.jsx)("input",{id:"room",placeholder:"Enter a Room Name",type:"text",className:"validate",value:r,onChange:function(e){return i(e.target.value)}}),Object(f.jsx)("label",{htmlFor:"room",children:"Room"})]})}),Object(f.jsx)("button",{className:"btn",children:"Create Room"})]})]}),Object(f.jsx)("div",{className:"card-action"})]})}),Object(f.jsx)("div",{className:"col s6 m5 offset-1",children:Object(f.jsx)(_,{rooms:j})})]})}):Object(f.jsx)(m.a,{to:"/login"})},F=(s(130),function(e){var t=e.logout;return Object(f.jsx)("div",{children:Object(f.jsx)("li",{onClick:t,className:"green",children:Object(f.jsx)("a",{href:"",children:"Logout"})})})}),E=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("li",{className:"green",children:Object(f.jsx)("a",{href:"/login",children:"Login"})}),Object(f.jsx)("li",{className:"green",children:Object(f.jsx)("a",{href:"/signup",children:"Signup"})})]})},P=function(){var e=Object(a.useContext)(O),t=e.user,s=e.setUser,c=function(){var e=Object(u.a)(j.a.mark((function e(){var t,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:5000/logout",{credentials:"include"});case 3:t=e.sent,c=t.json(),console.log("logout data",c),s(null),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),n=t?Object(f.jsx)(F,{logout:c}):Object(f.jsx)(E,{});return Object(f.jsxs)("div",{children:[Object(f.jsx)("nav",{className:"green",children:Object(f.jsxs)("div",{className:"nav-wrapper",children:[Object(f.jsx)("a",{href:"/",className:"brand-logo",children:"Chat"}),Object(f.jsx)("a",{href:"","data-target":"mobile-demo",className:"sidenav-trigger",children:Object(f.jsx)("i",{className:"material-icons",children:"menu"})}),Object(f.jsx)("ul",{id:"nav-mobile",className:"right hide-on-med-and-down",children:n})]})}),Object(f.jsx)("ul",{className:"sidenav",id:"mobile-demo",children:n})]})},T=function(){var e=Object(a.useContext)(O),t=e.user,s=e.setUser,c=Object(a.useState)(""),n=Object(d.a)(c,2),r=n[0],i=(n[1],Object(a.useState)("")),o=Object(d.a)(i,2),l=o[0],b=o[1],h=Object(a.useState)(""),x=Object(d.a)(h,2),p=x[0],v=x[1],g=Object(a.useState)(""),N=Object(d.a)(g,2),w=N[0],S=(N[1],Object(a.useState)("")),y=Object(d.a)(S,2),C=(y[0],y[1],Object(a.useState)("")),_=Object(d.a)(C,2),k=_[0],F=_[1],E=Object(a.useState)(""),P=Object(d.a)(E,2),T=P[0],M=P[1],U=Object(a.useState)(""),L=Object(d.a)(U,2),D=(L[0],L[1],function(){var e=Object(u.a)(j.a.mark((function e(t){var c,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),F(""),M(""),console.log(r,l,p,w),e.prev=4,e.next=7,fetch("http://localhost:5000/login",{method:"POST",credentials:"include",body:JSON.stringify({name:r,email:l,password:p,profession:w}),headers:{"Content-Type":"application/json"}});case 7:return c=e.sent,e.next=10,c.json();case 10:n=e.sent,console.log(n),n.errors&&(F(n.errors.email),M(n.errors.password)),n.user&&s(n.user),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}());return t?Object(f.jsx)(m.a,{to:"/"}):Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("h3",{children:"Welcome to Login"}),Object(f.jsxs)("form",{className:"col s12",onSubmit:D,children:[Object(f.jsx)("div",{className:"row",children:Object(f.jsxs)("div",{className:"input-field col s12",children:[Object(f.jsx)("input",{id:"email",type:"email",className:"validate",value:l,onChange:function(e){return b(e.target.value)}}),Object(f.jsx)("div",{className:"email error red-text",children:k}),Object(f.jsx)("label",{htmlFor:"email",children:"Email"})]})}),Object(f.jsx)("div",{className:"row",children:Object(f.jsxs)("div",{className:"input-field col s12",children:[Object(f.jsx)("input",{id:"password",type:"password",className:"validate",value:p,onChange:function(e){return v(e.target.value)}}),Object(f.jsx)("div",{className:"password error red-text",children:T}),Object(f.jsx)("label",{htmlFor:"password",children:"Password"})]})}),Object(f.jsx)("button",{className:"btn",children:"Login"})]})]})},M=function(){var e=Object(a.useContext)(O),t=e.user,s=e.setUser,c=Object(a.useState)(""),n=Object(d.a)(c,2),r=n[0],i=n[1],o=Object(a.useState)(""),l=Object(d.a)(o,2),b=l[0],h=l[1],x=Object(a.useState)(""),p=Object(d.a)(x,2),v=p[0],g=p[1],N=Object(a.useState)(""),w=Object(d.a)(N,2),S=w[0],y=w[1],C=Object(a.useState)(""),_=Object(d.a)(C,2),k=_[0],F=_[1],E=Object(a.useState)(""),P=Object(d.a)(E,2),T=P[0],M=P[1],U=Object(a.useState)(""),L=Object(d.a)(U,2),D=L[0],J=L[1],B=Object(a.useState)(""),R=Object(d.a)(B,2),W=R[0],I=R[1],z=function(){var e=Object(u.a)(j.a.mark((function e(t){var c,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),M(""),F(""),J(""),I(""),console.log(r,b,v,S),e.prev=6,e.next=9,fetch("http://localhost:5000/signup",{method:"POST",credentials:"include",body:JSON.stringify({name:r,email:b,password:v,profession:S}),headers:{"Content-Type":"application/json"}});case 9:return c=e.sent,e.next=12,c.json();case 12:n=e.sent,console.log(n),n.errors&&(M(n.errors.email),F(n.errors.name),J(n.errors.password),I(n.errors.profession)),n.user&&s(n.user),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[6,18]])})));return function(t){return e.apply(this,arguments)}}();return t?Object(f.jsx)(m.a,{to:"/"}):Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("h3",{children:"Welcome to Signup"}),Object(f.jsxs)("form",{className:"col s12",onSubmit:z,children:[Object(f.jsx)("div",{className:"row",children:Object(f.jsxs)("div",{className:"input-field col s12",children:[Object(f.jsx)("input",{id:"name",type:"text",className:"validate",value:r,onChange:function(e){return i(e.target.value)}}),Object(f.jsx)("div",{className:"name error red-text",children:k}),Object(f.jsx)("label",{htmlFor:"name",children:"Name"})]})}),Object(f.jsx)("div",{className:"row",children:Object(f.jsxs)("div",{className:"input-field col s12",children:[Object(f.jsx)("input",{id:"email",type:"email",className:"validate",value:b,onChange:function(e){return h(e.target.value)}}),Object(f.jsx)("div",{className:"email error red-text",children:T}),Object(f.jsx)("label",{htmlFor:"email",children:"Email"})]})}),Object(f.jsx)("div",{className:"row",children:Object(f.jsxs)("div",{className:"input-field col s12",children:[Object(f.jsx)("input",{id:"password",type:"password",className:"validate",value:v,onChange:function(e){return g(e.target.value)}}),Object(f.jsx)("div",{className:"password error red-text",children:D}),Object(f.jsx)("label",{htmlFor:"password",children:"Password"})]})}),Object(f.jsx)("div",{className:"row",children:Object(f.jsxs)("div",{className:"input-field col s12",children:[Object(f.jsx)("input",{id:"profession",type:"text",className:"validate",value:S,onChange:function(e){return y(e.target.value)}}),Object(f.jsx)("div",{className:"profession error red-text",children:W}),Object(f.jsx)("label",{htmlFor:"profession",children:"Profession"})]})}),Object(f.jsx)("button",{className:"btn",children:"Sign Up"})]})]})};var U=function(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),s=t[0],c=t[1];return Object(a.useEffect)((function(){(function(){var e=Object(u.a)(j.a.mark((function e(){var t,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:5000/verifyuser",{credentials:"include",headers:{"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:s=e.sent,c(s),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(f.jsx)(b.a,{children:Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)(O.Provider,{value:{user:s,setUser:c},children:[Object(f.jsx)(P,{}),Object(f.jsxs)(m.d,{children:[Object(f.jsx)(m.b,{exact:!0,path:"/",component:k}),Object(f.jsx)(m.b,{path:"/chat/:room_id/:room_name",component:y}),Object(f.jsx)(m.b,{exact:!0,path:"/signup",component:M}),Object(f.jsx)(m.b,{exact:!0,path:"/login",component:T})]})]})})})},L=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,133)).then((function(t){var s=t.getCLS,c=t.getFID,n=t.getFCP,a=t.getLCP,r=t.getTTFB;s(e),c(e),n(e),a(e),r(e)}))};o.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(U,{})}),document.getElementById("root")),L()},70:function(e,t,s){},97:function(e,t){}},[[131,1,2]]]);
//# sourceMappingURL=main.fc5bdb61.chunk.js.map